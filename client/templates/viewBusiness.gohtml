<!DOCTYPE html>
<html lang="en">
    <head>
        {{template "header" .}}
    </head>
    <body>
        <div class="container">
            {{template "nav" .}}

            <h1>{{ .Business.Name }}</h1>

            <hr/>

            <div>
                {{ if .Business.Description }}
                <div class="mb-3">{{ .Business.Description }}</div>
                {{ end }}

                {{ if or .Business.Address .Business.UnitNo .Business.Zipcode }}
                    <div class="mb-3">
                        <div><strong>Address</strong></div>
                        {{ if .Business.Address }}
                        <div>{{ .Business.Address }}</div>
                        {{ end }}

                        {{ if .Business.UnitNo }}
                        <div>{{ .Business.UnitNo }}</div>
                        {{ end }}

                        {{ if .Business.Zipcode }}
                        <div>{{ .Business.Zipcode }}</div>
                        {{ end }}
                    </div>
                {{ end }}

                {{ if .Business.Website }}
                <div class="d-flex flex-row">
                    <div style="min-width: 20px;"><i class="fas fa-link mr-3"></i></div>
                    <div><small><a href="{{ .Business.Website }}" target="_blank">{{ .Business.Website }}</a></small></div>
                </div>
                {{ end }}

                {{ if .Business.Instagram }}
                <div class="d-flex flex-row">
                    <div style="min-width: 20px;"><i class="fab fa-instagram"></i></div>
                    <div><small><a href="{{ .Business.Instagram }}" target="_blank">{{ .Business.Instagram }}</a></small></div>
                </div>
                {{ end }}

                {{ if .Business.Facebook }}
                <div class="d-flex flex-row">
                    <div style="min-width: 20px;"><i class="fab fa-facebook-f mr-3"></i></div>
                    <div><small><a href="{{ .Business.Facebook }}" target="_blank">{{ .Business.Facebook }}</a></small></div>
                </div>
                {{ end }}
            </div>

            {{ if and .Business.Lat .Business.Lng }}
            <div id="map" class="mt-3" style="min-height: 500px; width: 100%; height:100%"></div>

            <script src="https://maps.googleapis.com/maps/api/js?key={{ .GMapsAPIKey }}&callback=initMap&libraries=&v=weekly" async></script>
            <script>
            // Initialize and add the map
            function initMap() {
                const pos = { lat: {{ .Business.Lat }}, lng: {{ .Business.Lng }} };
                const map = new google.maps.Map(document.getElementById("map"), {
                    zoom: 18,
                    center: pos,
                });
                const marker = new google.maps.Marker({
                    position: pos,
                    map: map
                });
            }
            </script>
            {{ end }}

            {{template "footer"}}
        </div>
    </body>
</html>